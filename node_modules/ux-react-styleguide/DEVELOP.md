# Building, running, and testing ux-react-styleguide

This document describes how to set up your development environment to build, run, and test `ux-react-styleguide`.
It also explains the basic mechanics of using `git`, `node`, and `yarn`.

* [Prerequisites](#prerequisites)
* [Getting the Sources](#getting-the-sources)
* [Installing NPM Modules](#installing-npm-modules)
* [Building](#building)
* [Running Locally](#running-locally)
* [Creating Components](#creating-components)
* [Implementing Components](#implementing-components)
* [Running Tests Locally](#running-tests-locally)

See the [contribution guidelines](https://github.homedepot.com/ux/ux-react-styleguide/blob/master/CONTRIBUTING.md) if you'd like to contribute.

## Prerequisites

Before you can build and run, you must install and configure the following products on your development machine:

* [Git](http://git-scm.com) and/or the **GitHub app** (for [Mac](http://mac.github.com) or
  [Windows](http://windows.github.com)); [GitHub's Guide to Installing
  Git](https://help.github.com/articles/set-up-git) is a good source of information.

* [Node.js](http://nodejs.org), (version specified in the engines field of [`package.json`](../master/package.json)) which is used to run a development web server,
  run tests, and generate distributable files.
    * Ensure to point NPM to the Home Depot artifactory: 
    ```shell
    npm config set registry https://npm.artifactory.homedepot.com/artifactory/api/npm/npm
    ```

* [Yarn](https://yarnpkg.com) (version specified in the engines field of [`package.json`](../master/package.json)) which is used to install dependencies.
 
* Ensure the `ux-styleguide` package is added to your project - [How to Install](https://github.homedepot.com/ux/ux-styleguide#installation)
    * `ux-styleguide.min.js` and `ux-styleguide.min.css` are required files

## Getting the Sources

Fork and clone the repository:

1. Login to your GitHub account.
2. [Fork](http://help.github.com/forking) the [repository](https://github.homedepot.com/ux/ux-react-styleguide).
3. Clone your fork of the repository and define an `upstream` remote pointing back to the main repository that you forked in the first place.

```shell
# Clone your GitHub repository:
git clone https://github.homedepot.com/ux/ux-react-styleguide.git

# Go to the ux-react-styleguide directory:
cd ux-react-styleguide

# Add the main repository as an upstream remote to your repository:
git remote add upstream https://github.homedepot.com/ux/ux-react-styleguide.git
```
## Installing NPM Modules

Next, install the JavaScript modules needed to build and run:

```shell
# Install project dependencies (package.json)
yarn install
```

## Building

```shell
yarn build
```

* Results are put in the dist folder.

## Running Locally

```shell
yarn start
```

## Creating Components

Please follow the [Airbnb React Standards](https://github.com/airbnb/javascript/tree/master/react) when writing React code.

Each component should have it's own directory within the `src` directory and should contain:
- Corresponding `.js` file (main component file)
- Corresponding `.spec.js` file (component test file)
- Corresponding `.scss` file (optional)

Any generated `.scss` files should be imported into `src/base.scss`.

## Implementing Components

An existing React project is needed to implement components during development.

Install ux-react-styleguide into the existing project then use the following commands to link them together for local development:

```shell
yarn link  # execute inside ux-react-styleguide directory

yarn link ux-react-styleguide  # execute inside existing React project directory
```

Then, as ux-react-styleguide is run locally, any changes made will be reflected in the existing React project.

To stop linking execute the following inside ux-react-styleguide directory:
```shell
yarn unlink
```

## Running Tests Locally

To run tests:

```shell
yarn test        # Run all tests in a single pass on node

yarn test:watch  # Run all tests in watch mode on node
```

Test coverage reports are located in `coverage/lcov-report/index.html`.

* You should execute the test suites before submitting a PR to GitHub.
